#define _GNU_SOURCE
#include <sys/types.h>
#include <sys/syscall.h>
#include <unistd.h>
#include <stdio.h>
#include <time.h>
#include <stdlib.h>
#include <errno.h>
#include <string.h>

#ifndef __NR_set_rsv
#define __NR_set_rsv 397
#endif

#ifndef __NR_cancel_rsv
#define __NR_cancel_rsv 398
#endif


int main(int argc, char **argv){
        pid_t process_id;
        process_id = getpid();

        struct timespec *test_C = (struct timespec *)malloc(sizeof(struct timespec));
        struct timespec *test_T = (struct timespec *)malloc(sizeof(struct timespec));
        test_C->tv_nsec = 1000;
        test_T->tv_nsec = 2000;
        
        syscall(__NR_set_rsv, process_id, test_C, test_T);
        fprintf(stderr, "failed: %s\n", strerror(errno));
	
}
